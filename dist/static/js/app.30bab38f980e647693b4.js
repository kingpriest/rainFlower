webpackJsonp([1],{"2hp8":function(t,s){},"34KM":function(t,s){},"5GHe":function(t,s){},"7XyJ":function(t,s){},EY2H:function(t,s){},HsJ3:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("7+uW"),a={name:"stars",props:{score:{type:Number},size:{type:Number}},data:function(){return{stars:[{id:1,state:"off"},{id:2,state:"off"},{id:3,state:"off"},{id:4,state:"off"},{id:5,state:"off"}]}},computed:{starType:function(){return"star-"+this.size},starsC:function(){var t=Math.floor(this.score),s=this.score%1!=0,e=this.score-t,i=[];return this.stars.forEach(function(a,o){a.id<=t?i.push({id:a.id,state:"on"}):s&&e>=.5&&a.id===t+1?i.push({id:a.id,state:"half"}):i.push({id:a.id,state:"off"})}),i}}},o={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"star",class:this.starType},this._l(this.starsC,function(t){return s("span",{key:t.id,staticClass:"star-item",class:t.state})}))},staticRenderFns:[]};var n=e("VU/8")(a,o,!1,function(t){e("5GHe")},"data-v-396d179a",null).exports,l={name:"detail-title",props:{content:{type:String}}},r={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"detail-title"},[s("div",{staticClass:"detail-line"}),this._v(" "),s("div",{staticClass:"detail-font"},[this._v(this._s(this.content))]),this._v(" "),s("div",{staticClass:"detail-line"})])},staticRenderFns:[]};var c=e("VU/8")(l,r,!1,function(t){e("QciY")},"data-v-ee00dad8",null).exports,h=new i.a;function d(t,s,e,i){t.style.opacity=1-parseFloat((e-i)/s).toFixed(2)}function p(t,s,e,i){t.style.opacity=parseFloat((e-i)/s).toFixed(2)}function v(t,s,e,i,a,o){var n;n=void 0!==o?o:1,t.style[a]=s+(e-i)*n+"px"}var u={name:"apphead",props:{seller:{type:Object},posTabY:{type:Number},elHeight:{type:Number},posY:{type:Number},posEndY:{type:Number}},components:{stars:n,detailtitle:c},data:function(){return{num:0,show:!1,sales:["decrease","discount","special","invoice","guarantee"],changeColor:"icon-uncolor",showText:"unshow"}},computed:{choise:function(){return this.sales[this.seller.supports[0].type]},height:function(){return this.elHeight+this.posTabY+134}},watch:{posTabY:function(){var t,s,e,i,a;d(this.$refs.sTaps,60,this.posTabY,-this.elHeight),p(this.$refs.lTaps,60,this.posTabY,-this.elHeight),this.posTabY>=50-this.elHeight&&this.posTabY<=90-this.elHeight&&(p(this.$refs.bulTitle,40,this.posTabY,50-this.elHeight),v(this.$refs.bulletin,-15,this.posTabY-50,-this.elHeight,"top"),v(this.$refs.content,20,this.posTabY-50,-this.elHeight,"height"),this.posTabY>=70-this.elHeight?this.showText="show":this.showText="unshow"),this.posTabY>=60-this.elHeight&&this.posTabY<=110-this.elHeight&&(p(this.$refs.saleTitle,50,this.posTabY,60-this.elHeight),v(this.$refs.saleContent,-32,this.posTabY-60,-this.elHeight,"top")),this.posTabY>=110-this.elHeight&&this.posTabY<=140-this.elHeight&&(t=this.$refs.image,s=30,e=this.posTabY,i=110-this.elHeight,a=parseFloat((e-i)/s).toFixed(1),t.style.transform="scale("+(1+Number(a))+")"),this.posTabY>=60-this.elHeight&&this.posTabY<=140-this.elHeight&&v(this.$refs.sale,-30,this.posTabY-60,-this.elHeight,"top"),this.posTabY>=260-this.elHeight&&this.posTabY<=360-this.elHeight?p(this.$refs.arrow,50,this.posTabY,260-this.elHeight):this.posTabY<260-this.elHeight?this.$refs.arrow.style.opacity=0:this.$refs.arrow.style.opacity=1}},methods:{scrollUp:function(){this.$emit("scrUp")},getTicket:function(){alert("优惠券领取成功！")},toggle:function(){this.show=!this.show},changeCol:function(){this.changeColor="icon-uncolor"===this.changeColor?"icon-colored":"icon-uncolor"},changeRect:function(){var t,s,e;d(this.$refs.icon,20,this.posY),t=this.$refs.icon,s=20,1+(e=this.posY)/s>=0&&(t.style.transform="scale("+(1+e/s)+")")}}},f={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.seller?e("div",{ref:"apphead",staticClass:"apphead",style:{height:t.height+"px"}},[e("div",{ref:"icon",staticClass:"icon",on:{click:t.changeCol}},[e("span",{staticClass:"icon-favorite",class:t.changeColor})]),t._v(" "),e("div",{staticClass:"container",style:{height:t.height-18+"px"}},[e("h1",{staticClass:"title"},[t._v(t._s(t.seller.name))]),t._v(" "),e("div",{ref:"sTaps",staticClass:"small-taps"},[e("span",[e("stars",{attrs:{score:t.seller.score,size:24}})],1),t._v(" "),e("span",[t._v(t._s(t.seller.score))]),t._v(" "),e("span",{staticClass:"count"},[t._v("月售"+t._s(t.seller.sellCount))]),t._v(" "),e("span",[t._v(t._s(t.seller.description)+"约"+t._s(t.seller.deliveryTime)+"分钟"+t._s(t.posTabY))])]),t._v(" "),e("ul",{ref:"lTaps",staticClass:"large-taps"},[e("li",[e("div",{staticClass:"tit"},[e("stars",{attrs:{score:t.seller.score,size:24}})],1),t._v(" "),e("div",{staticClass:"cou"},[t._v(t._s(t.seller.score))])]),t._v(" "),e("li",[e("div",{staticClass:"tit"},[t._v("月售")]),t._v(" "),e("div",{staticClass:"cou"},[t._v(t._s(t.seller.sellCount))])]),t._v(" "),e("li",[e("div",{staticClass:"tit"},[t._v("约"+t._s(t.seller.deliveryTime)+"分钟")]),t._v(" "),e("div",{staticClass:"cou"},[t._v(t._s(t.seller.description))])]),t._v(" "),e("li",[e("div",{staticClass:"tit"},[t._v("距离")]),t._v(" "),e("div",{staticClass:"cou"},[t._v(t._s(t.seller.distance)+"km")])])]),t._v(" "),e("div",{ref:"bulletin",staticClass:"bulletin"},[e("div",{ref:"bulTitle",staticClass:"bul-title"},[e("span",{staticClass:"line"}),t._v(" "),e("span",{staticClass:"text"},[t._v("公告")]),t._v(" "),e("span",{staticClass:"line"})]),t._v(" "),e("div",{ref:"content",staticClass:"content",class:t.showText},[t._v(t._s(t.posTabY)+t._s(t.seller.bulletin))])]),t._v(" "),e("div",{ref:"saleContent",staticClass:"sale-content"},[e("div",{ref:"saleTitle",staticClass:"sale-title"},[e("span",{staticClass:"line"}),t._v(" "),e("span",{staticClass:"text"},[t._v("优惠")]),t._v(" "),e("span",{staticClass:"line"})]),t._v(" "),e("div",{staticClass:"salesCut",on:{click:t.getTicket}},[e("img",{ref:"image",staticClass:"image",attrs:{width:"20%",height:"20%",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1526704795&di=089171c5e9dea22a232f2b2c86b00428&imgtype=jpg&er=1&src=http%3A%2F%2Fpicapi.zhituad.com%2Fphoto%2F140%2F07%2F79FFB.jpg"}})])]),t._v(" "),e("div",{ref:"sale",staticClass:"sale"},t._l(t.seller.supports,function(s){return e("div",{key:s.type,staticClass:"sale-item"},[e("span",{staticClass:"sale-icon",class:t.sales[s.type]}),t._v(" "),e("span",{staticClass:"sale-text"},[t._v(t._s(s.description))])])})),t._v(" "),e("div",{ref:"arrow",staticClass:"up-arrow",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.scrollUp(s)}}},[e("div",{staticClass:"icon-arrow_lift"})])])]):t._e()},staticRenderFns:[]};var _=e("VU/8")(u,f,!1,function(t){e("eL7o")},null,null).exports,g=e("/ocq"),C=e("mtWM"),b=e.n(C),m=e("GQaK");var w={name:"seller",components:{stars:n},methods:{format:function(t,s){var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(s)&&(s=s.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(s)&&(s=s.replace(RegExp.$1,1===RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return s},_initScroll:function(){var t=this;this.scroll?this.scroll.refresh():this.scroll=new m.a(".seller-wrapper",{probeType:3,click:!0,bounce:{top:!1}}),this.scroll.on("scroll",function(s){t.scrollY=Math.abs(Math.round(s.y))}),this.sellerScroll?this.sellerScroll.refresh():this.sellerScroll=new m.a(".pics-container",{probeType:3,click:!0,scrollX:!0,bounce:{left:!1,right:!1}})},enableScroll:function(){this.scroll.enable()},disableScroll:function(){this.scroll.disable()}},data:function(){return{seller:[],scrollY:0,scroll:null,sales:["decrease","discount","special","invoice","guarantee"]}},watch:{scrollY:function(){var t=!1;t=0===this.scrollY,h.$emit("transs",t)}},created:function(){var t=this;b.a.get("http://47.95.250.189/api/seller").then(function(s){var e=s.data;0===e.errno&&(t.seller=e.data,t.$nextTick(function(){t._initScroll()}))})}},y={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"seller-wrapper"},[e("div",{staticClass:"seller-content"},[e("div",{staticClass:"shopInfo border-1px"},[e("div",{staticClass:"shopname-content border-1px"},[e("div",{staticClass:"shop-title"},[e("h1",{staticClass:"shopname"},[t._v(t._s(t.seller.name))]),t._v(" "),e("div",{staticClass:"sell-count"},[e("stars",{staticClass:"sell-star",attrs:{size:36,score:t.seller.score}}),t._v(" "),e("span",{staticClass:"count"},[t._v("月售"+t._s(t.seller.sellCount)+"单")])],1)]),t._v(" "),t._m(0)]),t._v(" "),e("ul",{staticClass:"shop-ulist"},[e("li",[e("div",{staticClass:"title"},[t._v("起送价")]),t._v(" "),e("div",{staticClass:"price"},[e("span",{staticClass:"pri"},[t._v(t._s(t.seller.minPrice))]),t._v(" "),e("span",{staticClass:"pri-text"},[t._v("元")])])]),t._v(" "),e("li",[e("div",{staticClass:"title"},[t._v("商家配送")]),t._v(" "),e("div",{staticClass:"price"},[e("span",{staticClass:"pri"},[t._v(t._s(t.seller.deliveryPrice))]),t._v(" "),e("span",{staticClass:"pri-text"},[t._v("元")])])]),t._v(" "),e("li",[e("div",{staticClass:"title"},[t._v("平均配送时间")]),t._v(" "),e("div",{staticClass:"price"},[e("span",{staticClass:"pri"},[t._v(t._s(t.seller.deliveryTime))]),t._v(" "),e("span",{staticClass:"pri-text"},[t._v("分钟")])])])])]),t._v(" "),e("div",{staticClass:"strap border-1px"}),t._v(" "),e("div",{staticClass:"bulletin-active border-1px"},[e("div",{staticClass:"bulletin border-1px"},[e("h1",{staticClass:"bull-title"},[t._v("公告与活动")]),t._v(" "),e("div",{staticClass:"bull-content"},[t._v(t._s(t.seller.bulletin))])]),t._v(" "),e("div",{ref:"sale",staticClass:"sale"},t._l(t.seller.supports,function(s){return e("div",{key:s.type,staticClass:"sale-item border-1px"},[e("span",{staticClass:"sale-icon",class:t.sales[s.type]}),t._v(" "),e("span",{staticClass:"sale-text"},[t._v(t._s(s.description))])])}))]),t._v(" "),e("div",{staticClass:"strap border-1px"}),t._v(" "),e("div",{staticClass:"pics border-1px"},[e("div",{staticClass:"pics-title"},[t._v("商家实景")]),t._v(" "),e("div",{staticClass:"pics-container"},[e("ul",{staticClass:"pics-ulist"},t._l(t.seller.pics,function(t,s){return e("li",{key:s,staticClass:"pics-list"},[e("img",{attrs:{src:t,width:"100px",height:"100px"}})])}))])]),t._v(" "),e("div",{staticClass:"strap border-1px"}),t._v(" "),e("div",{staticClass:"seller-infos"},[e("h1",{staticClass:"seller-title border-1px"},[t._v("商家信息")]),t._v(" "),e("ul",{staticClass:"seller-ulist"},t._l(t.seller.infos,function(s,i){return e("li",{key:i,staticClass:"seller-list border-1px"},[t._v(t._s(s))])}))])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"heart"},[s("div",{staticClass:"icon-favorite"}),this._v(" "),s("div",{staticClass:"text"},[this._v("已收藏")])])}]};var x=e("VU/8")(w,y,!1,function(t){e("7XyJ")},"data-v-e1a77016",null).exports,Y=e("v5o6"),S=e.n(Y),T={name:"cartconcontrol",props:{food:{type:Object}},data:function(){return{num:0}},methods:{add:function(t){S.a.attach(t.target),t._constructed&&(this.food.count?this.food.count++:i.a.set(this.food,"count",1),h.$emit("increment",t.target))},sub:function(t){t._constructed&&this.food.count--}}},k={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cart-wrapper"},[e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"sub",on:{click:function(s){t.sub(s)}}},[e("div",{staticClass:"inner icon-remove_circle_outline"})])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"count"},[t._v(t._s(t.food.count))]),t._v(" "),e("div",{staticClass:"add icon-add_circle",on:{click:function(s){s.stopPropagation(),s.preventDefault(),t.add(s)}}})],1)},staticRenderFns:[]};var $=e("VU/8")(T,k,!1,function(t){e("mvC3")},"data-v-2eea3278",null).exports,H=[],E=[],F={name:"goods",components:{cartconcontrol:$},data:function(){return{goods:[],seller:[],sales:["decrease","discount","special","invoice","guarantee"],heightArr:[],scrollY:0,menuScroll:{},foodsScroll:{}}},created:function(){var t=this;b.a.get("http://47.95.250.189/api").then(function(s){var e=s.data;0===e.errno&&(t.goods=e.data.goods,t.seller=e.data.seller,t.$nextTick(function(){t._initScroll(),t._calHeight(),h.$on("increment",function(s){h.$emit("showSel",t.selectFood)})}))})},watch:{scrollY:function(){var t=!1;t=0===this.scrollY,h.$emit("transw",t)}},methods:{enableScroll:function(){this.menuScroll.enable(),this.foodsScroll.enable()},disableScroll:function(){this.menuScroll.disable(),this.foodsScroll.disable()},_initScroll:function(){var t=this;this.menuScroll=new m.a(".menu-wrapper",{probeType:3,click:!0,bounce:{top:!1}}),this.foodsScroll=new m.a(".foods-wrapper",{probeType:3,click:!0,bounce:{top:!1}}),this.foodsScroll.on("scroll",function(s){t.scrollY=Math.abs(Math.round(s.y))})},_calHeight:function(){var t=this,s=0;this.heightArr.push(s),H.forEach(function(e,i){s+=Number(e),t.heightArr.push(s)})},change:function(t,s){var e=E[t];this.foodsScroll.scrollToElement(e,300)}},directives:{pushToArr:{inserted:function(t){H.push(t.clientHeight),E.push(t)}}},computed:{currentIndex:function(){for(var t=this.heightArr,s=0,e=t.length;s<e;s++){var i=t[s],a=t[s+1];if(!a||this.scrollY>=i&&this.scrollY<a)return s}return 0},selectFood:function(){var t=[];return this.goods.forEach(function(s,e){s.foods.forEach(function(s,e){s.count>0&&t.push(s)})}),t}}},R={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods"},[e("div",{staticClass:"menu-wrapper"},[e("ul",t._l(t.goods,function(s,i){return e("li",{key:i,staticClass:"menu-item",class:t.currentIndex===i?"on":"off",on:{click:function(s){t.change(i,s)}}},[e("span",{staticClass:"text border-1px"},[s.type>0?e("span",{staticClass:"icon",class:t.sales[s.type]}):t._e(),t._v("\n        "+t._s(s.name))])])}))]),t._v(" "),e("div",{staticClass:"foods-wrapper"},[e("ul",t._l(t.goods,function(s,i){return e("li",{directives:[{name:"pushToArr",rawName:"v-pushToArr"}],key:i,staticClass:"food-list"},[e("h1",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),e("ul",t._l(s.foods,function(s,i){return e("li",{key:i,staticClass:"food-item"},[e("div",{staticClass:"food-icon",on:{click:function(e){t.$emit("toDetail",s,e)}}},[e("img",{attrs:{width:"57",height:"57",src:s.icon,alt:s.name}})]),t._v(" "),e("div",{staticClass:"content"},[e("h2",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),e("p",{staticClass:"desc"},[t._v(t._s(s.description))]),t._v(" "),e("div",{staticClass:"extra"},[e("span",{staticClass:"sellout"},[t._v("月售"+t._s(s.sellCount)+"份")]),t._v(" "),e("span",{staticClass:"rating"},[t._v("好评率"+t._s(s.rating)+"%")])]),t._v(" "),e("div",{staticClass:"price"},[e("span",{staticClass:"new-price"},[t._v("￥"+t._s(s.price))]),e("span",{directives:[{name:"show",rawName:"v-show",value:s.oldPrice,expression:"food.oldPrice"}],staticClass:"old-price"},[t._v("￥"+t._s(s.oldPrice))])]),t._v(" "),e("div",{staticClass:"cartconcontrol"},[e("cartconcontrol",{attrs:{food:s}})],1)])])}))])}))])])},staticRenderFns:[]};var M=e("VU/8")(F,R,!1,function(t){e("EY2H")},"data-v-bb2c3a14",null).exports;var P={name:"ratings",components:{stars:n},methods:{format:function(t,s){var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(s)&&(s=s.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(s)&&(s=s.replace(RegExp.$1,1===RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return s},_initScroll:function(){var t=this;this.scroll?this.scroll.refresh():this.scroll=new m.a(".wrapper",{probeType:3,click:!0,bounce:{top:!1}}),this.scroll.on("scroll",function(s){t.scrollY=Math.abs(Math.round(s.y))})},enableScroll:function(){this.scroll.enable()},disableScroll:function(){this.scroll.disable()}},data:function(){return{ratings:[],scrollY:-1,scroll:null}},watch:{scrollY:function(){var t=!1;t=0===this.scrollY,h.$emit("transr",t)}},created:function(){var t=this;b.a.get("http://47.95.250.189/api/ratings").then(function(s){var e=s.data;0===e.errno&&(t.ratings=e.data,t.$nextTick(function(){t._initScroll()}))})},computed:{averScore:function(){var t=0;return this.ratings.forEach(function(s){t+=s.score}),(t/this.ratings.length).toFixed(1)},allRat:function(){return this.ratings.length},good:function(){var t=0;return this.ratings.forEach(function(s){0===s.rateType&&t++}),t},bad:function(){return this.allRat-this.good}}},N={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"ratings-wrapper"},[e("div",{staticClass:"ratings-content"},[e("div",{staticClass:"score-container border-1px"},[e("div",{staticClass:"left"},[e("div",{staticClass:"score"},[t._v(t._s(t.averScore))]),t._v(" "),e("div",{staticClass:"rat"},[t._v("综合评分")]),t._v(" "),e("div",{staticClass:"upText"},[t._v("高于周边商家69.2%")])]),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"service"},[e("div",{staticClass:"serTitle"},[t._v("服务态度")]),t._v(" "),e("stars",{attrs:{size:36,score:Number(t.averScore)}})],1),t._v(" "),e("div",{staticClass:"products"},[e("div",{staticClass:"proTitle"},[t._v("商品评价")]),t._v(" "),e("div",{staticClass:"star-container"},[e("stars",{attrs:{size:36,score:Number(t.averScore)}})],1)]),t._v(" "),t._m(0)])]),t._v(" "),e("div",{staticClass:"strap border-1px"})]),t._v(" "),e("div",{staticClass:"ratings-container"},[e("div",{staticClass:"rating-content border-1px"},[e("div",{staticClass:"rating-option"},[e("ul",{staticClass:"btn-group border-1px"},[e("li",{staticClass:"goodRat"},[e("span",{staticClass:"btn-title"},[t._v("全部")]),t._v(" "),e("div",{staticClass:"btn-num"},[t._v(t._s(t.allRat))])]),t._v(" "),e("li",{staticClass:"goodRat"},[e("span",{staticClass:"btn-title"},[t._v("满意")]),t._v(" "),e("div",{staticClass:"btn-num"},[t._v(t._s(t.good))])]),t._v(" "),e("li",{staticClass:"badRat"},[e("span",{staticClass:"btn-title"},[t._v("不满意")]),t._v(" "),e("div",{staticClass:"btn-num"},[t._v(t._s(t.bad))])])])]),t._v(" "),t._m(1)]),t._v(" "),e("ul",{staticClass:"comment"},t._l(t.ratings,function(s,i){return e("li",{key:i,staticClass:"border-1px"},[e("div",{staticClass:"avata"},[e("div",{staticClass:"icon"},[e("img",{attrs:{src:s.avatar,width:"28",height:"28"}})]),t._v(" "),e("div",{staticClass:"user"},[e("div",{staticClass:"username"},[t._v(t._s(s.username)+t._s(t.scrollY))]),t._v(" "),e("div",{staticClass:"rating-star"},[e("stars",{staticClass:"star",attrs:{size:24,score:s.score}}),t._v(" "),s.deliveryTime?e("span",{staticClass:"deliveryTime"},[t._v(t._s(s.deliveryTime)+"分钟送达")]):t._e()],1)]),t._v(" "),e("div",{staticClass:"time"},[t._v(t._s(t.format(new Date(s.rateTime),"yyyy-MM-dd  hh:mm")))])]),t._v(" "),e("div",{staticClass:"text"},[t._v(t._s(s.text))]),t._v(" "),e("div",{staticClass:"thumb"},[0===s.rateType?e("span",{staticClass:"icon-thumb_up"}):t._e(),t._v(" "),1===s.rateType?e("span",{staticClass:"icon-thumb_down"}):t._e(),t._v(" "),t._l(s.recommend,function(s,i){return e("span",{key:i,staticClass:"recommend"},[t._v(t._s(s))])})],2)])}))])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"delTime"},[s("div",{staticClass:"text"},[this._v("送达时间")]),this._v(" "),s("div",{staticClass:"time"},[this._v("33分钟")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"rating-selector"},[s("span",{staticClass:"icon-check_circle"}),this._v(" "),s("span",{staticClass:"text"},[this._v("只看有评价的内容")])])}]};var B=e("VU/8")(P,N,!1,function(t){e("HsJ3")},"data-v-c867c012",null).exports,U=e("BO1k"),z=e.n(U),I={name:"shopcart",data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],show:!1,maskShow:!1}},components:{cartconcontrol:$},props:{"deliver-price":{type:Number},minPrice:{type:Number},selectFoods:{type:Array,default:function(){return[]}},shopBottom:{type:Number},shopZIndex:{type:Number}},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach(function(s,e){t+=s.price*s.count}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(s,e){t+=s.count}),t},exPrice:function(){return this.minPrice-this.totalPrice}},methods:{hideList:function(){this.maskShow=this.show=!1},listShow:function(){var t=this;if(!this.totalPrice)return!1;this.show=!this.show,this.maskShow=this.show,this.show&&this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new m.a(".cart-list",{click:!0})})},addFood:function(t){this.drop(t)},clearCart:function(){this.maskShow=this.show=!1;var t=!0,s=!1,e=void 0;try{for(var a,o=z()(this.selectFoods);!(t=(a=o.next()).done);t=!0){var n=a.value;i.a.set(n,"count",0)}}catch(t){s=!0,e=t}finally{try{!t&&o.return&&o.return()}finally{if(s)throw e}}},beforeEnter:function(t){this.balls.forEach(function(s){if(s.show){var e=s.el.getBoundingClientRect(),i=e.left-t.style.left-s.el.clientWidth,a=-(window.innerHeight-e.top-t.style.bottom-s.el.clientHeight);t.style.display="",t.style.webkitTransform="translate3d(0,"+a+"px,0)",t.style.transform="translate3d(0, "+a+"px, 0)";var o=t.getElementsByClassName("inner-hook")[0];o.style.webkitTransform="translate3d("+i+"px,0,0)",o.style.transform="translate3d("+i+"px,0,0)"}})},enter:function(t){t.offsetHeight;this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var s=t.getElementsByClassName("inner-hook")[0];s.style.webkitTransform="translate3d(0,0,0)",s.style.transform="translate3d(0,0,0)"})},afterEnter:function(t){var s=this.dropBalls.shift();s&&(s.show=!1,t.style.display="none")},drop:function(t){var s=this;this.balls.forEach(function(e){if(!e.show)return e.show=!0,e.el=t,s.dropBalls.push(e),!0})}}},A={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"shopcart",style:{bottom:t.shopBottom+"px",zIndex:t.shopZIndex}},[e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("div",{staticClass:"icon",on:{click:t.listShow}},[e("div",{staticClass:"logo",class:t.totalCount>0?"highlight":""},[e("span",{staticClass:"icon-shopping_cart",class:t.totalCount>0?"highlight":""})]),t._v(" "),t.totalCount>0?e("div",{staticClass:"count"},[t._v(t._s(t.totalCount))]):t._e()]),t._v(" "),e("div",{staticClass:"content"},[e("span",{staticClass:"price",class:t.totalCount>0?"highlight":""},[t._v("￥"+t._s(t.totalPrice))]),t._v(" "),e("span",{staticClass:"text"},[t._v("另需配送费￥"+t._s(t.deliverPrice)+"元")])])]),t._v(" "),e("div",{staticClass:"right",class:t.exPrice<=0?"highlight":""},[t.exPrice===t.minPrice?e("span",[t._v("￥"+t._s(t.minPrice)+"起送")]):t.exPrice>0&&t.exPrice<t.minPrice?e("span",[t._v("还差￥"+t._s(t.exPrice)+"起送")]):e("span",[t._v("去结算")])])]),t._v(" "),e("div",{staticClass:"ball-container"},t._l(t.balls,function(s,i){return e("div",{key:i},[e("transition",{attrs:{name:"drop"},on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"ball.show"}],staticClass:"ball"},[e("div",{staticClass:"inner inner-hook"})])])],1)})),t._v(" "),e("transition",{attrs:{name:"content"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"cart-content"},[e("div",{staticClass:"cart-title border-1px"},[e("span",{staticClass:"title"},[t._v("购物车")]),t._v(" "),e("span",{staticClass:"clear",on:{click:t.clearCart}},[t._v("清空")])]),t._v(" "),e("div",{staticClass:"cart-list"},[e("ul",t._l(t.selectFoods,function(s,i){return e("li",{key:i,staticClass:"cart-item border-1px"},[e("h1",{staticClass:"item-title"},[t._v(t._s(s.name))]),t._v(" "),e("div",{staticClass:"control"},[e("div",{staticClass:"price"},[e("span",{staticClass:"sig"},[t._v("￥")]),t._v(" "),e("span",{staticClass:"num"},[t._v(t._s(s.price*s.count))])]),t._v(" "),e("div",{staticClass:"cartconcontrol-wrapper"},[e("cartconcontrol",{attrs:{food:s},on:{increment:t.addFood}})],1)])])}))])])])],1),t._v(" "),e("transition",{attrs:{name:"msk"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.maskShow,expression:"maskShow"}],staticClass:"mask",on:{click:t.hideList}})])],1)},staticRenderFns:[]};var D=e("VU/8")(I,A,!1,function(t){e("Xuk5")},"data-v-e217681e",null).exports;function V(t,s,e,i){t.style.opacity=1-parseFloat((e-i)/s).toFixed(2)}function W(t,s,e,i){t.style.opacity=parseFloat((e-i)/s).toFixed(2)}var Z=window.innerHeight,j=0,L={name:"goods-detail",data:function(){return{touchY:0,num:0,foodScroll:{},foodRating:{},curr:{},width:"100%",height:window.innerHeight-window.innerWidth-130+"px",posY:0,ratPosY:0,good:0,bad:0,btnArr:[{name:"全部"},{name:"推荐"},{name:"吐槽"}],scrollHeight:window.innerHeight-window.innerWidth-130,positionY:0}},props:{food:{type:Object},showFood:{type:Boolean}},components:{cartconcontrol:$},methods:{count:function(t){switch(t){case 0:return this.goodRating+this.badRating;case 1:return this.goodRating;case 2:return this.badRating}},format:function(t,s){var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(s)&&(s=s.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(s)&&(s=s.replace(RegExp.$1,1===RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return s},scrollUp:function(t){this.curr.scrollTo(0,-this.scrollHeight,1e3),V(t.target,this.scrollHeight,this.posY),W(this.$refs.ratWrapper,this.scrollHeight,this.posY)},_initFoodScroll:function(){var t=this;this.$nextTick(function(){j=window.getComputedStyle(t.$refs.det).height;navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);t.$refs.arrow.style.opacity=1,t.foodScroll=new m.a(".wrapper",{probeType:3,click:!0,scrollY:!0,bounce:{bottom:!1}}),t.foodRating=new m.a(".ratingWrapper",{probeType:3,click:!0,bounce:{top:!1}}),t.foodScroll.on("scroll",function(s){t.posY=Math.floor(s.y)}),t.foodScroll.on("touchEnd",function(s){t.touchY=Math.floor(s.y)}),t.foodRating.on("scroll",function(s){t.ratPosY=Math.floor(s.y)})})},add:function(t){this.$emit("increDetail",t)},close:function(){this.$emit("clk"),this.curr.destroy()}},computed:{goodRating:function(){var t=0;for(var s in this.food.ratings)0===this.food.ratings[s].rateType&&t++;return t},badRating:function(){var t=0;for(var s in this.food.ratings)1===this.food.ratings[s].rateType&&t++;return t}},watch:{foodScroll:function(){this.curr=this.foodScroll},touchY:function(){this.touchY>80?this.close():this.touchY<0&&this.touchY>-(this.scrollHeight-58)?this.foodScroll.scrollTo(0,0,1300):this.touchY<=-(this.scrollHeight-58)&&this.touchY>-this.scrollHeight&&this.foodScroll.scrollTo(0,-this.scrollHeight,1300)},posY:function(){V(this.$refs.arrow,50,0,this.posY),W(this.$refs.ratWrapper,50,0,this.posY);var t=Z-Math.floor(j.substr(0,3));this.posY===t?this.foodRating.enable():this.foodRating.disable();var s=-62;this.posY<=-(this.scrollHeight-62)&&this.posY>=-this.scrollHeight?s+=-(this.posY+(this.scrollHeight-62)):this.posY<-this.scrollHeight?s=0:this.posY>-(this.scrollHeight-62)&&(s=-62),h.$emit("shopBottom",s),h.$emit("shopzIndex",50)},ratPosY:function(){0===this.ratPosY?this.foodScroll.enable():this.foodScroll.disable()}}},O={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper"},[e("div",{ref:"det",staticClass:"detail"},[e("div",{ref:"sky",style:{height:t.height,width:t.width}}),t._v(" "),e("div",{staticClass:"image"},[e("div",{staticClass:"icon",on:{click:t.close}},[e("span",{staticClass:"icon-close"})]),t._v(" "),e("img",{ref:"image",attrs:{src:t.food.image,width:"100%",height:"100%"}})]),t._v(" "),e("div",{ref:"content",staticClass:"content border-1px"},[e("h1",{staticClass:"title"},[t._v(t._s(t.food.name))]),t._v(" "),e("div",{staticClass:"ratings"},[e("span",{staticClass:"sell-count"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),t._v(" "),e("span",{staticClass:"rating"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),t._v(" "),e("div",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("￥"+t._s(t.food.price))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(t.food.oldPrice))])]),t._v(" "),e("div",{staticClass:"cartcontrol"},[e("cartconcontrol",{attrs:{food:t.food},on:{increment:t.add}})],1)]),t._v(" "),e("div",{ref:"arrow",staticClass:"arrow",on:{click:function(s){t.scrollUp(s)}}},[e("div",{staticClass:"icon-arrow_lift"})]),t._v(" "),e("div",{staticClass:"ratingWrapper"},[e("div",{ref:"ratWrapper",staticClass:"container"},[e("div",{staticClass:"rating-content border-1px"},[e("div",{staticClass:"rating-option"},[e("h1",{staticClass:"rating-title"},[t._v("商品评价")]),t._v(" "),e("ul",{staticClass:"btn-group border-1px"},t._l(t.btnArr,function(s,i){return e("li",{key:i,staticClass:"btn",class:2===i?"btn-b":"btn-g"},[e("span",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),e("span",{staticClass:"count"},[t._v(t._s(t.count(i)))])])}))]),t._v(" "),t._m(0)]),t._v(" "),e("ul",{staticClass:"rating-list"},t._l(t.food.ratings,function(s,i){return e("li",{key:i,staticClass:"rating-item border-1px"},[e("div",{staticClass:"user-time"},[e("span",{staticClass:"time"},[t._v(t._s(t.format(new Date(s.rateTime),"yyyy-MM-dd  hh:mm")))]),t._v(" "),e("div",{staticClass:"user"},[e("span",{staticClass:"username"},[t._v(t._s(s.username))]),t._v(" "),e("img",{staticClass:"rating-icon",attrs:{src:"item.avatar",alt:"icon",width:"12",height:"12"}})])]),t._v(" "),e("div",{staticClass:"rating-cont border-1px"},[e("span",{directives:[{name:"show",rawName:"v-show",value:0===s.rateType,expression:"item.rateType===0"}],staticClass:"icon-thumb_up"}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:1===s.rateType,expression:"item.rateType===1"}],staticClass:"icon-thumb_down"}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:s.text,expression:"item.text"}],staticClass:"text"},[t._v(t._s(s.text))])])])})),t._v(" "),e("div",{staticClass:"rating-block"})])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"rating-selector"},[s("span",{staticClass:"icon-check_circle"}),this._v(" "),s("span",{staticClass:"text"},[this._v("只看有评价的内容")])])}]};var X=e("VU/8")(L,O,!1,function(t){e("a6xg")},"data-v-7ea0333e",null).exports;i.a.use(g.a);var q={name:"App",data:function(){return{seller:{},innerHei:164+window.innerHeight,tabContainHei:window.innerHeight-98,tabBlockHei:window.innerHeight-50,appScroll:{},tabScroll:{},posY:-1,posTabY:-(window.innerHeight-50),posEndY:-1,showFood:!1,selectFood:[],foodDetail:{},foodScrollMove:!1,tabCount:1,shopcartBottom:0,shopZIndex:50,isLoading:!1}},created:function(){var t=this;b.a.get("http://47.95.250.189/api/seller",{responseType:"json"}).then(function(s){console.log(s),t.seller=s.data.data,console.log(t.seller),t.$nextTick(function(){S.a.attach(document.body),t._initSc(),h.$on("increment",function(s){t.$refs.shopcart.drop(s)}),h.$on("showSel",function(s){t.selectFood=s}),h.$on("transw",function(s){!0===s?(t.tabScroll.enable(),t.appScroll.enable()):(t.tabScroll.disable(),t.appScroll.disable())}),h.$on("transr",function(s){!0===s?(t.tabScroll.enable(),t.appScroll.enable()):(t.tabScroll.disable(),t.appScroll.disable())}),h.$on("transs",function(s){!0===s?(t.tabScroll.enable(),t.appScroll.enable()):(t.tabScroll.disable(),t.appScroll.disable())}),h.$on("shopBottom",function(s){t.shopcartBottom=s}),h.$on("shopzIndex",function(s){t.shopZIndex=s})})})},watch:{posEndY:function(){var t=window.innerHeight-214;this.tabScroll&&this.posEndY>=-480?this.tabScroll.scrollTo(0,-(this.tabBlockHei-t),2e3):this.tabScroll&&this.posEndY<-480&&this.tabScroll.scrollTo(0,-this.tabBlockHei,2e3)},posTabY:function(){this.posTabY===-this.tabBlockHei?this.appScroll.enable():this.appScroll.disable(),this.posTabY>=-450&&(this.shopcartBottom=-(this.posTabY+450))},posY:function(){this.$refs.ahead.changeRect(),function(t,s,e){1+e/s>=0&&(t.style.transform="scale("+(1+e/s)+")")}(this.$refs.avatar,20,this.posY),function(t,s,e){t.style.opacity=0-e/s}(this.$refs.inputbox,20,this.posY),function(t,s,e){t.style.opacity=1+e/s}(this.$refs.avatar,20,this.posY),0===this.posY?this.tabScroll.enable():this.tabScroll.disable(),-164===this.posY&&this.posTabY===-this.tabBlockHei?this.$refs.goods.enableScroll():this.$refs.goods.disableScroll(),this.posY<=-10?(this.$refs.inputbox.style.zIndex=20,this.$refs.avatar.style.zIndex=-100):(this.$refs.inputbox.style.zIndex=-100,this.$refs.avatar.style.zIndex=20)},tabCount:function(){var t=this;switch(this.tabCount){case 1:h.$on("transw",function(s){!0===s?(t.tabScroll.enable(),t.appScroll.enable()):(t.tabScroll.disable(),t.appScroll.disable())});break;case 2:h.$on("transr",function(s){!0===s?(t.tabScroll.enable(),t.appScroll.enable()):(t.tabScroll.disable(),t.appScroll.disable())});break;case 3:h.$on("transs",function(s){!0===s?(t.tabScroll.enable(),t.appScroll.enable()):(t.tabScroll.disable(),t.appScroll.disable())})}},tabScroll:function(){var t=this;this.tabScroll.on("scroll",function(s){t.posTabY=Math.floor(s.y)}),this.tabScroll.on("touchEnd",function(s){t.posEndY=Math.floor(s.y)})},appScroll:function(){var t=this;this.appScroll.on("scroll",function(s){t.posY=Math.floor(s.y)})},showFood:function(){this.showFood?this.shopZIndex=20:(this.shopZIndex=50,this.shopcartBottom=0)}},methods:{scrUp:function(){this.tabScroll.scrollTo(0,-this.tabBlockHei,2e3)},toDetail:function(t,s){this.foodDetail=t,this.showFood=!0,this.$refs.fd._initFoodScroll()},doneSel:function(t){this.selectFood=t},clk:function(){this.showFood=!1},_initSc:function(){this.appScroll=new m.a(".scroll-container",{probeType:3,scrollY:!0,tap:!0,bounce:{top:!1,bottom:!1}}),this.tabScroll=new m.a(".tab-container",{probeType:3,scrollY:!0,startY:-this.tabBlockHei,tap:!0,bounce:{top:!1,bottom:!1}})}},components:{apphead:_,shopcart:D,goodsDetail:X},router:new g.a({routes:[{path:"/",redirect:"/goods"},{path:"/seller",component:x},{path:"/goods",component:M},{path:"/ratings",component:B}],linkActiveClass:"active"})},J={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"banner"},[e("div",{ref:"inputbox",staticClass:"inputbox"},[e("input",{staticClass:"search",attrs:{type:"text",name:"search",placeholder:"想搜点什么",size:"100",width:"300",height:"30"}})]),t._v(" "),e("div",{staticClass:"bg"},[e("img",{attrs:{src:t.seller.bground,alt:"bg",width:"100%",height:"80"}})]),t._v(" "),e("div",{ref:"avatar",staticClass:"avatar"},[e("img",{attrs:{src:t.seller.avatar,alt:"avatar",width:"60",height:"60"}})])]),t._v(" "),e("div",{staticClass:"scroll-container"},[e("div",{staticClass:"inner",style:{height:t.innerHei+"px"}},[e("div",{staticClass:"block"}),t._v(" "),e("apphead",{ref:"ahead",staticClass:"apphead",attrs:{posEndY:t.posEndY,posY:t.posY,posTabY:t.posTabY,elHeight:t.tabBlockHei,seller:t.seller},on:{scrUp:t.scrUp}}),t._v(" "),e("div",{staticClass:"tab-container",style:{height:t.tabContainHei+"px"}},[e("div",{staticClass:"tab-inner"},[e("div",{staticClass:"tab-block",style:{height:t.tabBlockHei+"px"}}),t._v(" "),e("div",{staticClass:"tab border-1px"},[e("div",{staticClass:"tab-item",on:{click:function(s){t.tabCount=1}}},[e("router-link",{attrs:{to:"/goods"}},[t._v("商品")])],1),t._v(" "),e("div",{staticClass:"tab-item",on:{click:function(s){t.tabCount=2}}},[e("router-link",{attrs:{to:"/ratings"}},[t._v("评论")])],1),t._v(" "),e("div",{staticClass:"tab-item",on:{click:function(s){t.tabCount=3}}},[e("router-link",{attrs:{to:"/seller"}},[t._v("商家")])],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"loading"},[t._m(0),t._v(" "),e("div",{staticClass:"loading-text"},[t._v("是谁呼叫舰队")])]),t._v(" "),e("router-view",{ref:"goods",style:{height:t.tabContainHei-40+"px"},on:{toDetail:t.toDetail}})],1)])],1)]),t._v(" "),e("shopcart",{ref:"shopcart",staticClass:"shop",attrs:{shopZIndex:t.shopZIndex,shopBottom:t.shopcartBottom,"select-foods":t.selectFood,"deliver-price":t.seller.deliveryPrice,minPrice:t.seller.minPrice}}),t._v(" "),e("transition",{attrs:{name:"fdetail"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFood,expression:"showFood"}],staticClass:"fade"})]),t._v(" "),e("transition",{attrs:{name:"scroll"}},[e("goods-detail",{directives:[{name:"show",rawName:"v-show",value:t.showFood,expression:"showFood"}],ref:"fd",staticClass:"wrap",attrs:{food:t.foodDetail,showFood:t.showFood},on:{clk:t.clk}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("ul",{staticClass:"animate"},[s("li"),s("li"),s("li")])}]};var G=e("VU/8")(q,J,!1,function(t){e("2hp8")},null,null).exports;e("34KM");i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:G},template:"<App/>"})},QciY:function(t,s){},Xuk5:function(t,s){},a6xg:function(t,s){},eL7o:function(t,s){},mvC3:function(t,s){}},["NHnr"]);